/*
	Facebook API
	by facebook.com
*//*
	MailOnline Facebook App
	by bynd.com
*/var MolFacebookApp=function(){"use strict";var a,b,c,d={},e,f,g,h,i,j,k,l,m,n,o,p;return g={loggingOutput:null,logLines:0,hideElement:function(a){g.applyStyles(a,{display:"none"})},trimTo:function(a,b){return a.length>b?a.substring(0,b)+" ...":a},docCookies:{getItem:function(a){return!a||!this.hasItem(a)?null:unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1"))},setItem:function(a,b,c,d,e,f){if(!a||/^(?:expires|max\-age|path|domain|secure)$/.test(a))return;var g="";c=p.cookieExpiryDays*24*60*60;if(c)switch(typeof c){case"number":g="; max-age="+c;break;case"string":g="; expires="+c;break;case"object":c.hasOwnProperty("toGMTString")&&(g="; expires="+c.toGMTString())}document.cookie=escape(a)+"="+escape(b)+g+(e?"; domain="+e:"")+"; path=/"+(f?"; secure":"")},removeItem:function(a){if(!a||!this.hasItem(a))return;var b=new Date;b.setDate(b.getDate()-1),document.cookie=escape(a)+"=; expires="+b.toGMTString()+"; path=/"},hasItem:function(a){return(new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)}},prettyDate:function(a){var b=(new Date).getTimezoneOffset(),c=a.substring(0,a.indexOf("+")),d,e,f;return a=(c||"").replace(/-/g,"/").replace(/[TZ]/g," ").replace(/T/g," "),d=new Date(a),e=((new Date).getTime()-d.getTime())/1e3,e+=b*60+1,f=Math.floor(e/86400),isNaN(f)||f<0||f>=31?"":f===0&&(e<60&&"just now"||e<120&&"1 min ago"||e<3600&&Math.floor(e/60)+" mins ago"||e<7200&&"1 hr ago"||e<86400&&Math.floor(e/3600)+" hrs ago")||f===1&&"Yesterday"||f<7&&f+" days ago"||f<31&&Math.ceil(f/7)+" weeks ago"},addClickHandler:function(a,b){a.addEventListener?a.addEventListener("click",b,!1):a.attachEvent&&a.attachEvent("onclick",b)},removeClickHandler:function(a,b){a.removeEventListener?a.removeEventListener("click",b,!1):a.removeEvent&&a.removeEvent("onclick",b)},addHover:function(a,b,c){a.addEventListener?(a.addEventListener("mouseover",b,!1),a.addEventListener("mouseout",c,!1)):a.attachEvent&&(a.attachEvent("onmouseover",b),a.attachEvent("onmouseout",c))},showElement:function(a){g.applyStyles(a,{display:"block"})},log:function(a){var b=[g.logLines+"> "],c,d=arguments.length,e,f;for(c=0;c<d;c++)b.push(arguments[c]);window.console&&window.console.log(b),g.logLines++},applyStyles:function(a,b){if(a&&a.style)for(var c in b){c=="cssFloat"&&parseInt(p.ieSupport)==8&&(c="float",b["float"]=b.cssFloat);try{b.hasOwnProperty(c)&&(a.style[c]=b[c])}catch(d){}}},createLoggingOutput:function(){this.loggingOutput=this.createElementWithID("debug"),g.applyStyles(this.loggingOutput,{zIndex:10,position:"absolute",bottom:0,fontFamily:"Consolas, Courier",fontSize:"13px",lineHeight:"130%",width:window.outerWidth+"px",borderTop:"1px solid #333",height:"300px"})},trim:function(a){var b=a.split(" ");return b.join(" ")},createElementWithClassName:function(a){return this.createElement("",a)},createElementWithID:function(a){return this.createElement(a)},createElement:function(a,b){var c=g.newElement();return arguments[0]!==""?c.setAttribute("id",arguments[0]):arguments[1]&&this.addClassName(c,b),c},animate:function(a,b,c,d){var e,f,g,h=16,i;for(e in b){switch(e){case"height":i="offsetHeight";break;case"width":i="offsetWidth"}i&&(f=a[i]),g=b[e]}var j=Math.abs(g-f),k=Math.floor(c/h),l=j/k,m=g<f,n=setInterval(function(){if(m)if(a[i]-l>g){var b=a[i]-l+"px";a.style[e]=b}else a.style[e]=g+"px",clearInterval(n),d&&d();else if(a[i]+l<g){var b=a[i]+l+"px";a.style[e]=b}else a.style[e]=g+"px",clearInterval(n),d&&d()},h)},addClassName:function(a,b){var c=b.split(" "),d=a.getAttribute("class"),e=[],f,g=c.length;d=d?d.split(" "):[];for(f=0;f<g;f++)this.arrayContains(d,c[f])||e.push(c[f]);a.setAttribute("class",d.concat(e).join(" "))},removeClassName:function(a,b){var c=a.getAttribute("class").split(" "),d,e=c.length;for(d=0;d<e;d++)c[d]===b&&(c[d]="");a.setAttribute("class",c.join(" "))},removeChildren:function(a){while(a&&a.childNodes.length)a.removeChild(a.childNodes[0])},setText:function(a,b){a&&(g.removeChildren(a),a.appendChild(document.createTextNode(b)))},setHTML:function(a,b){if(a){g.removeChildren(a);var c=document.createElement("div");c.innerHTML=b,a.appendChild(c)}},newElement:function(a){a||(a="div");var b=document.createElement(a);return g.applyStyles(b,{fontFamily:"Arial, sans-serif"}),a==="p"&&g.applyStyles(b,{padding:0,margin:0}),b},arrayContains:function(a,b){if(Array.prototype.indexOf)return a.indexOf(b)!==-1;var c,d=a.length;for(c=0;c<d;c++)if(a[c]===b)return!0;return!1}},window.log=g.log,h=function(){var a=g.newElement(),b=g.newElement("div"),c=g.newElement(),d=g.newElement(),e=g.newElement();a.setAttribute("id",p.namespace+"_header_root"),g.applyStyles(c,{background:"transparent url("+p.images.HEADER_BACKGROUND+") no-repeat left top",height:"31px",position:"relative"}),g.applyStyles(b,{backgroundImage:"url("+p.images.MAILONLINE_TOP_LOGO+")",width:"80px",height:"13px",margin:"8px",cssFloat:"left",border:"0px"}),c.setAttribute("id",p.namespace+"_header"),g.applyStyles(e,{width:"68px",height:"17px",cssFloat:"right",backgroundImage:"url("+p.images.FACEBOOK_LOGO+")"}),g.applyStyles(d,{position:"absolute",height:"17px",top:"5px",right:"7px"}),d.appendChild(e),c.appendChild(b),c.appendChild(d),a.appendChild(c);var f={rootElement:a};return f},i=function(){var a=g.newElement("div"),b=g.createElementWithClassName("fb-activity");return g.applyStyles(b,{cssFloat:"left",backgroundColor:"white",left:"-5px"}),g.applyStyles(a,{position:"absolute",left:"5px",top:"140px",height:p.appHeight-40+"px",overflowY:"scroll",width:p.appWidth-10+"px"}),b.setAttribute("data-header","false"),b.setAttribute("data-recommendations","true"),b.setAttribute("data-width",p.appWidth-25),b.setAttribute("data-height",p.activityPluginHeight),b.setAttribute("data-border-color","white"),b.setAttribute("data-linktarget","_top"),b.setAttribute("ref",p.appRef),a.appendChild(b),a},l=function(){var a=g.newElement(),b=g.newElement("div"),c=g.newElement("div"),d=g.newElement("a"),e=g.createElementWithClassName("fb-login-button");return g.setText(e,p.copy.LOGIN_BUTTON),a.setAttribute("id",p.namespace+"_intro_root"),g.applyStyles(a,{fontSize:"13px",fontFamily:"Arial, sans-serif",color:"#203360",width:p.appWidth,fontWeight:"normal",textAlign:"center",lineHeight:"15px",padding:0,paddingBottom:"30px",marginBottom:"20px",position:"relative"}),g.applyStyles(e,{position:"relative",display:"block",margin:"10px auto"}),e.setAttribute("data-scope",p.loginScope),g.applyStyles(d,{marginTop:"10px",textAlign:"center",width:p.appWidth,fontSize:"12px",textDecoration:"underline",color:"#676767"}),g.setText(d,p.copy.DISABLE_APP_INTRO),g.addClickHandler(d,p.disableApp),g.applyStyles(b,{marginTop:"5px"}),g.applyStyles(c,{marginBottom:"10px",fontSize:"12px"}),{rootElement:a,setLoginButtonText:function(a){g.setText(e,a)},showAuthPrompt:function(){g.setHTML(b,p.copy.LOGGED_IN_NEEDS_AUTH),g.setHTML(c,p.copy.LOGGED_IN_NEEDS_AUTH_BELOW),a.appendChild(b),a.appendChild(p.getFacepile()),a.appendChild(e),a.appendChild(c),a.appendChild(d)},showLargeAuthPrompt:function(){g.setHTML(b,p.copy.LOGGED_IN_FB_REFFERED),g.setHTML(c,p.copy.LOGGED_IN_FB_REFFERED_BELOW),g.applyStyles(a,{fontSize:"25px"}),a.appendChild(b),a.appendChild(p.getFacepile()),a.appendChild(e),a.appendChild(c),a.appendChild(d)},showAnonPrompt:function(){g.setHTML(b,p.copy.LOGGED_OUT)}}},j=function(){var a=g.newElement(),b=g.newElement(),c=g.newElement(),d=g.newElement("span"),e=g.newElement("span"),f=g.newElement(),h=g.newElement(),i;return a.setAttribute("id",p.namespace+"_userview"),g.applyStyles(a,{width:"100%",position:"relative"}),i={rootElement:a,removeUserInfo:function(){g.removeChildren(a)},setActivityOn:function(){g.applyStyles(h,{backgroundPosition:"left top"}),g.applyStyles(f,{backgroundPosition:"left bottom"}),g.applyStyles(b,{cursor:"default"}),g.applyStyles(c,{cursor:"pointer"}),g.applyStyles(d,{fontWeight:"normal"}),g.applyStyles(e,{fontWeight:"normal"}),g.addClickHandler(c,p.toggleActivityOff),g.removeClickHandler(b,p.toggleActivityOn),_gaq.push(["_trackEvent","FacebookApp","ShareReads","on"])},setActivityOff:function(){g.applyStyles(f,{backgroundPosition:"left top"}),g.applyStyles(h,{backgroundPosition:"left bottom"}),g.applyStyles(e,{fontWeight:"normal"}),g.applyStyles(d,{fontWeight:"normal"}),g.applyStyles(b,{cursor:"pointer"}),g.applyStyles(c,{cursor:"default"}),g.addClickHandler(b,p.toggleActivityOn),g.removeClickHandler(c,p.toggleActivityOff),_gaq.push(["_trackEvent","FacebookApp","ShareReads","off"])},setActivity:function(a){a?i.setActivityOn():i.setActivityOff()},setLoggedIn:function(){g.showElement(b),g.showElement(c)},setLoggedOut:function(){g.hideElement(b),g.hideElement(c)},addUserInfo:function(i){var j=g.newElement("img"),k=g.newElement(),l=g.newElement("span"),m=g.newElement();j.setAttribute("src","//graph.facebook.com/"+i.id+"/picture");var n=g.newElement("a");n.href="http://facebook.com",n.target="_blank",n.title="Click to open Facebook ...",g.setText(n,i.name),l.appendChild(n),g.applyStyles(k,{display:"inline-block",width:p.appWidth,marginBottom:"30px"}),g.applyStyles(j,{width:"45px",height:"45px",backgroundColor:"#ddd",border:0,marginTop:"3px",cssFloat:"left"}),g.applyStyles(l,{color:"#203360",fontSize:"17px",fontWeight:"bold",lineHeight:"20px",display:"block",overflow:"hidden",cssFloat:"left",margin:0,whiteSpace:"no-wrap",position:"absolute",left:"50px",top:"5px"}),g.applyStyles(m,{height:"18px",marginTop:"10px",clear:"both",color:"#646464"}),g.applyStyles(b,{display:"inline-block",paddingRight:"3px",paddingLeft:"0px",width:p.appWidth-15+"px",height:"25px",lineHeight:"11px",margin:0,whiteSpace:"no-wrap",top:0}),g.applyStyles(f,{display:"block",cssFloat:"left",left:"-5px",top:"0px",background:"transparent url("+p.images.ACTIVITY_TOGGLE_BUTTON+") no-repeat left top",width:"15px",height:"14px",margin:"3px"}),g.applyStyles(d,{width:"100%",fontSize:"11px"}),g.setText(d,p.copy.ACTIVITY_TOGGLE_ON),b.setAttribute("title",p.copy.ACTIVITY_TOGGLE_TOOLTIP_ON),b.appendChild(f),b.appendChild(d),g.applyStyles(c,{display:"inline-block",paddingRight:"3px",paddingLeft:"0px",width:p.appWidth-15+"px",height:"25px",lineHeight:"11px",margin:0,whiteSpace:"no-wrap",top:0}),g.applyStyles(h,{display:"block",cssFloat:"left",left:"-5px",top:"0px",background:"transparent url("+p.images.ACTIVITY_TOGGLE_BUTTON+") no-repeat left bottom",width:"15px",height:"14px",margin:"3px"}),g.applyStyles(e,{width:"100%",fontSize:"11px"}),g.setText(e,p.copy.ACTIVITY_TOGGLE_OFF),c.setAttribute("title",p.copy.ACTIVITY_TOGGLE_TOOLTIP_OFF),c.appendChild(h),c.appendChild(e),g.addHover(b,function(){g.applyStyles(b,{color:"#507cad"})},function(){g.applyStyles(b,{color:"#5f5f5f"})}),g.addHover(c,function(){g.applyStyles(c,{color:"#507cad"})},function(){g.applyStyles(c,{color:"#5f5f5f"})}),m.appendChild(b),m.appendChild(c),k.appendChild(l),a.appendChild(j),a.appendChild(k),k.appendChild(m)}},i},m=function(){var a=g.newElement(),b=g.newElement("ul"),c;g.applyStyles(a,{position:"absolute",left:"10px",top:"140px",width:p.appWidth-10,backgroundColor:"white",height:p.appHeight-40+"px",overflowY:"auto",overflowX:"hidden"});var d=p.ieSupport&&p.ieSupport<=10?p.appWidth-30+"px":p.appWidth-15+"px";return g.applyStyles(b,{height:"auto",width:d,paddingLeft:"0",margin:0,listStyle:"none",overflow:"hidden"}),a.appendChild(b),a.setAttribute("id",p.namespace+"_article_list_view"),c={rootElement:a,list:b,listItems:[],onRemove:undefined,inArray:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},getCurrentIDs:function(){var a=[],b;for(b=0;b<this.listItems.length;b++)a.push(this.listItems[b].data.data[p.itemType].id);return a},sortByDate:function(){while(b.children.length)b.removeChild(b.children[0]);this.listItems.sort(function(a,b){var c=a.data.publish_time,d=b.data.publish_time;return c=c.substring(0,c.indexOf("+")),d=d.substring(0,b.data.publish_time.indexOf("+")),c=c.replace(/-/g,"/").replace(/[TZ]/g," ").replace(/T/g," ").split(".")[0],d=d.replace(/-/g,"/").replace(/[TZ]/g," ").replace(/T/g," ").split(".")[0],Date.parse(d)-Date.parse(c)});for(var a=0;a<this.listItems.length;a++)b.appendChild(this.listItems[a].element),g.applyStyles(this.listItems[a].element,{});g.applyStyles(this.listItems[this.listItems.length-1].element,{border:0})},finished:function(){this.listItems.length&&g.applyStyles(this.listItems[this.listItems.length-1].element,{border:0});var a=[],b,d=this.batchImageRequests.length;for(b=0;b<d;b++)a.push({relative_url:this.batchImageRequests[b].graphID});FB.api("/","post",{batch:a},function(a){for(b=0;b<a.length;b++){var d,e,f;d=a[b].body,e=d.indexOf(".jpg"),e===-1&&(e=d.indexOf(".png")),e!==-1&&(f=d.substring(0,e).lastIndexOf('"'),c.batchImageRequests[b]&&c.batchImageRequests[b].imageElement&&c.batchImageRequests[b].imageElement.setAttribute("src",d.substring(f+1,e+4)))}c.batchImageRequests=[]})},batchImageRequests:[],addItem:function(a){if(!this.inArray(this.getCurrentIDs(),a.data[p.itemType].id)){var b=g.newElement("li"),c=g.newElement(),d=g.newElement("p"),e=g.newElement("img"),f=g.newElement(),h=g.newElement("a"),i=g.newElement("a"),j=g.newElement("span"),k=g.newElement("span");g.applyStyles(b,{padding:"3px 0",width:p.appWidth,minHeight:"55px",webkitUserSelect:"none",mozUserSelect:"none",userSelect:"none",cursor:"default",overflowY:"auto",overflowX:"hidden",position:"relative"}),g.applyStyles(c,{marginRight:"3px",top:"2px",width:"36px",display:"block",cssFloat:"left"}),g.setText(d,g.prettyDate(a.publish_time)),g.applyStyles(d,{fontSize:"9px",color:"#507cad",textAlign:"center",width:"100%",lineHeight:"9px",paddingTop:"4px",display:"block",cssFloat:"left"}),g.applyStyles(e,{width:"30px",height:"30px",border:"1px solid #d1d1d1",cssFloat:"left"}),this.batchImageRequests.push({imageElement:e,graphID:a.data[p.itemType].id}),c.appendChild(e),c.appendChild(d),g.applyStyles(f,{cssFloat:"left",display:"block"}),g.setText(h,g.trimTo(a.data[p.itemType].title,45)),h.setAttribute("href",a.data[p.itemType].url+"?ref="+p.appRef),g.applyStyles(h,{textDecoration:"none",cursor:"pointer",color:"#5f5f5f",fontSize:"11px",lineHeight:"120%",display:"block",width:p.appWidth-75+"px",position:"absolute",top:"2px",left:"40px"}),g.addHover(h,function(){g.applyStyles(h,{color:"#507cad"})},function(){g.applyStyles(h,{color:"#5f5f5f"})}),g.setText(k,"x"),i.appendChild(j),i.appendChild(k),g.setText(j,"Remove"),g.addClickHandler(i,this.onClickRemove),g.applyStyles(i,{fontSize:"10px",color:"#c1c1c1",textDecoration:"none",cursor:"pointer",position:"absolute",bottom:"2px",left:"40px",padding:"0 0px",display:"block",height:"15px"}),g.addHover(i,function(){g.applyStyles(i,{backgroundColor:"#333"}),g.applyStyles(j,{textDecoration:"none"})},function(){g.applyStyles(i,{backgroundColor:"white"}),g.applyStyles(j,{textDecoration:"underline"})}),g.applyStyles(j,{textDecoration:"underline",lineHeight:"15px"}),g.applyStyles(k,{marginLeft:"5px",lineHeight:"15px"}),f.appendChild(h),b.appendChild(i),b.appendChild(c),b.appendChild(f),this.listItems.push({data:a,element:b}),this.sortByDate()}},onClickRemove:function(a){var b=a.target||a.srcElement,d=b.parentNode.parentNode;d.nodeName.toLowerCase()==="li"&&c.removeItem(c.getItemInList(d))},removeItem:function(a){this.onRemove&&a&&a.data&&a.data.id&&this.onRemove(a.data.id,function(b){var c=a.element.parentElement||a.element.parentNode;c.removeChild(a.element)})},getItemInList:function(a){for(var b=0;b<this.listItems.length;b++)if(this.listItems[b].element===a)return this.listItems.splice(b,1)[0];return null},getItemWithID:function(a){for(var b=0;b<this.listItems.length;b++)if(this.listItems[b].data.id===a)return this.listItems[b];return null},removeItemWithID:function(a){var b=this.getItemWithID(a);b&&this.removeItem(b)}},c},k=function(){var a=g.newElement(),b=g.newElement("span"),c=g.newElement("span");a.setAttribute("id",p.namespace+"_logout_button"),g.applyStyles(c,{paddingLeft:"3px"}),g.applyStyles(b,{fontWeight:"bold"}),g.applyStyles(a,{position:"absolute",right:"11px",bottom:"10px",padding:"2px 0 2px 5px",color:"#333",cursor:"pointer",display:"inline-block",fontSize:"11px",lineHeight:"13px"}),g.setText(b,"Logout"),g.setText(c,"x"),a.appendChild(b),a.appendChild(c),g.addHover(a,function(){g.applyStyles(b,{textDecoration:"underline"})},function(){g.applyStyles(b,{textDecoration:"none"})});var d={rootElement:a,onLogout:undefined,logout:function(a){d.onLogout!==undefined&&d.onLogout()}};return g.addClickHandler(a,d.logout),d},n=function(){var a=g.newElement(),b=g.newElement("ul"),c;return g.applyStyles(a,{cssFloat:"left",overflow:"hidden",lineHeight:"0"}),g.applyStyles(b,{listStyle:"none",position:"absolute",left:"9px",top:"125px",margin:"0 auto",zIndex:150,padding:0,overflow:"hidden"}),a.appendChild(b),a.setAttribute("id",p.namespace+"_tabbed_view"),c={show:function(){g.showElement(a),c.initing?(c.initing=!1,a.style.height=p.appHeight+"px"):a.style.height=p.appHeight+"px"},hide:function(){c.initing?(a.style.height="0px",g.hideElement(a),c.initing=!1):g.hideElement(a)},initing:!0,rootElement:a,tabMappings:[],selectedItem:null,flashTab:function(a){var b=this.selectedItem==this.tabMappings[a],d=this.tabMappings[a].label;b?this.deselect(d):this.select(d),setTimeout(function(){b?c.select(d):c.deselect(d),setTimeout(function(){b?c.deselect(d):c.select(d),setTimeout(function(){b?c.select(d):c.deselect(d)},200)},100)},200)},setSelected:function(a){var b,c;a!==this.selectedItem.label&&this.deselect(this.selectedItem.label),this.select(a);for(c=0;c<this.tabMappings.length;c++)this.tabMappings[c].label===a&&(b=this.tabMappings[c]);this.hideContent(),this.selectedItem=b,this.showContent()},showContent:function(){g.showElement(this.selectedItem.content)},hideContent:function(){g.hideElement(this.selectedItem.content)},tabSelected:function(a){var b=a.target||a.srcElement;return c.setSelected(b),a.stopPropagation?a.stopPropagation():a.cancelBubble&&a.cancelBubble(),!1},select:function(a){g.applyStyles(a,{backgroundPosition:"center top",color:"white",cursor:"default",marginTop:0,lineHeight:"16px"})},deselect:function(a){g.applyStyles(a,{backgroundPosition:"center -24px",fontWeight:"normal",color:"#3a578f",marginTop:"1px",cursor:"pointer",lineHeight:"15px"})},addTab:function(c,d){var e=g.newElement("li");g.applyStyles(e,{cssFloat:"left",display:"inline-block",padding:"4px 1px",marginTop:"1px",cursor:"pointer",width:p.appWidth/2-10+"px",textAlign:"center",fontSize:"10px",height:"16px",fontFamily:"Arial, sans-serif",lineHeight:"15px",fontWeight:"normal",color:"#3a578f",webkitUserSelect:"none",mozUserSelect:"none",userSelect:"none",backgroundImage:"url("+p.images.TAB_BACKGROUNDS+")",backgroundPosition:"center -24px",backgroundRepeat:"no-repeat"}),g.applyStyles(d,{display:"none",marginTop:"18px",backgroundColor:"white"}),g.setText(e,c),g.addClickHandler(e,this.tabSelected),b.appendChild(e),a.appendChild(d),this.tabMappings.push({label:e,content:d}),this.tabMappings.length===2&&g.applyStyles(e,{marginLeft:"2px"}),this.tabMappings.length===p.tabOrder+1&&(this.selectedItem=this.tabMappings[p.tabOrder],this.setSelected(e))}},c},o=function(){var a=g.newElement(),b=9;return g.applyStyles(a,{padding:b+"px",paddingBottom:"45px",width:p.appWidth-b*2+"px",cssFloat:"left",height:"auto",backgroundImage:"url("+p.images.LOGGED_IN_BOTTOM_GRADIENT+")",backgroundRepeat:"no-repeat",backgroundPosition:"0 bottom",position:"relative"}),{rootElement:a,show:function(){g.showElement(a)},hide:function(){g.hideElement(a)},addChild:function(b){b.rootElement?a.appendChild(b.rootElement):a.appendChild(b)}}},p={elementId:"fb-root",appId:"146202712090395",appRef:"fbapp",showWhenLoggedOut:!1,showLogoutLink:!0,namespace:"news",actionName:"reads",itemType:"article",readWaitTime:10,tabOrder:0,minWidthVisible:1360,appHeight:400,appWidth:180,activityPluginHeight:800,appTop:190,infoUrl:"/facebookfaq",cookieExpiryDays:14,loginScope:"email,publish_actions",images:function(){var a="//scripts.dailymail.co.uk/facebook/";return{FACEBOOK_LOGO:a+"facebook_logo.png",MAILONLINE_TOP_LOGO:a+"mol_top_logo.png",HEADER_BACKGROUND:a+"header_background.png",ACTIVITY_TOGGLE_BUTTON:a+"activity_toggle_btn.png",TAB_BACKGROUNDS:a+"activity_tab_background.png",SIDE_BORDERS:a+"side_borders.png",SCROLL_THUMBS:a+"scroll_thumbs.png",LOGGED_IN_BOTTOM_GRADIENT:a+"bottom_gradient.png",LOGGED_OUT_BOTTOM_GRADIENT:a+"bottom_gradient.png"}}(),copy:{INFO_TOOLTIP:"More about this app",INFO_LINK:"More info",LOGGED_IN_NEEDS_AUTH:"<h1 style='font-size: 22px; line-height: 26px; text-align: left !important;'>See what your friends are reading on <img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJgAAAAaCAMAAAB8ZGXAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzMyRkFBQzFBMThDMTFFMUE2RkFBNjhDM0I1QjVCRDAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzMyRkFBQzJBMThDMTFFMUE2RkFBNjhDM0I1QjVCRDAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDMzJGQUFCRkExOEMxMUUxQTZGQUE2OEMzQjVCNUJEMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDMzJGQUFDMEExOEMxMUUxQTZGQUE2OEMzQjVCNUJEMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Prx6blsAAABjUExURQAAAAAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9icwAAAE9ic0wHKkIAAAAfdFJOUwAQECAgMDBAQFBQYGBwcICAj4+fn6+vv7/Pz9/f7+92R0yZAAADBElEQVR42rWX6bqjIAyGwQ1atdqqxY3l/q9ymLIEtdY658z3ow2keXiLIUG0UuoM0sXoSCRG/1c5ccYkDQ/upJR3/DEqnqQsrY0vDft1rHSQBodow/CU/GXx/FMc+/uLF1XeSa3Ql2Q/56oMQ3Vh0ooP0mlI9wOloUlfVCFY0Sut+ZG8DXv033FNcisOk9VnsAYh3CzBol71BaXXVojru7BevT7o4YZxx3Cv3E4xRtgxmA4csP7GS7BR2DWTUWXnwcIUcwwE5Q4MIfIOjOBFDjAzXIDVqkBWkZj3wDIaoUPhzoMhAEMBGJxZXmE/Kl3+2XQ0AzFCQK2uHpLSxIOBwAMjCn99DSYXYICl5dBiJuV0CcFMubiqW3A2VYtQ1meImuOQebBa0a0H2ZGoo+/BCJxUrudK+zuyBnss8mqe9WKKFqLOUFIIkQRgWw8q1HyjGW3VGH0LdpecSa+h9CZLAWzxoPyIqqddJ1NtALb1UNW74XMFNkgvFoDhQQ6m6ho1qaecyApMhGC1SvRyInKccwi29fhhrbIFWAVcPAYwrHmJ/o4HSPMcjuICbO6XYFQvX8MGhmBrT6YekJyPEKyUoNI9SsM1ma0FBLIDpv4d7BbUtrkPwThwdT7HjJutwfBvg5nn7sciBBuYSx2OA7DpHRjaARvFD8B6L6GOT2X8It0HOziVZ8DqQIdgNpsuO2Cf69goToFRBPoWbMKHYNvKH6knOpP81xNgdwNmLhKVM3fAoHFDQz9TLtoVWGPLJsG+kPl6ztMUSmkFJrYmQWBamNvidnEMBh5IA9eOt4WsRNyRTb4TcXD7SWbLrn9HGB1ZMorsFFgmZkdGEdxAtXICrSauHNjFdyJf6XjOPG18h25hb7BjfaW3VgmKToFpMvWsKa1b0Zs963zbQ2QKCr5Wh337yfVcObk3AcKgZVXczhpdn0IpTWc7cl/Add99FH228WhF9agjRX9zpVavwku4dzHzCte4SaLJeerdDXZBk53EMPvbSjHYxKdf7CxMMLh3gn5XfwAnPa5uYObjVwAAAABJRU5ErkJggg==' style='margin-top: 3px' height='24px'/></h1>",LOGGED_IN_FB_REFFERED:"<h1>Click below to connect to the latest social reading experience and see what your friends are reading.</h1>",LOGGED_IN_NEEDS_AUTH_BELOW:"<ol style='color: #555555; text-align: left; width: 150px; margin-left: 15px; margin-top: 30px;'><li style='list-style: decimal !important;'>Share what you read with your friends</li><li style='list-style: decimal !important;'>See what your friends are reading</li><li style='list-style: decimal !important;'>You are in control at all times</li></ol>",LOGGED_IN_FB_REFFERED_BELOW:"<p>You're friends are already using it, why not start today?</p>",LOGGED_OUT:"Share the stories that matter to you with your friends & see what they're reading.",CONNECTING_TO_FACEBOOK_HEADER:"Connecting...",LOGGED_IN_HEADER:"MailOnline",LOGGED_OUT_HEADER:"MailOnline",LOGIN_BUTTON:"Login with Facebook",GETTING_USER_INFO_HEADER:"Getting User Info...",ACTIVITY_TOGGLE_ON:"Let your friends  see what you are reading",ACTIVITY_TOGGLE_OFF:"Block your friends from seeing what you are reading",ACTIVITY_TOGGLE_TOOLTIP_OFF:"Click here to stop your friends from seeing what you're reading",ACTIVITY_TOGGLE_TOOLTIP_ON:"Click here to let your friends see what you're reading",DISABLE_APP_INTRO:"Hide this",FRIENDS_ACTIVITY:"Friends Activity",YOUR_ACTIVITY:"Your Activity"},checkLoginStatus:function(b){FB.getLoginStatus(function(c){var d=c.authResponse;d&&(a=d.userID),_gaq.push(["_trackEvent","FacebookApp","Login",c.status]),b(c.status)})},loginToFacebook:function(a){FB.login(function(a){!!a.authResponse},{scope:p.loginScope})},populatedPreviouslyRead:!1,userIsLoggedIn:function(){this.getUserDetails(this.onGotUserDetails),this.showLoggedInView(),this.populatedPreviouslyRead||(this.populatedPreviouslyRead=!0,this.getPreviouslyReadArticles()),p.isActive?p.setActivityOn():p.setActivityOff()},userIsLoggedInButNotAuthorized:function(){var a=!0;this.showLoggedOutView(a)},userIsNotLoggedIn:function(){this.showLoggedOutView()},showLoggedInView:function(){d.LoadingView.hide(),d.LoggedOutView.hide(),d.LoggedInView.show(),d.userView.setLoggedIn(),g.applyStyles(b,{background:"white url("+p.images.SIDE_BORDERS+") repeat-x left 31px"})},showLoggedOutView:function(a){d.LoadingView.hide(),d.LoggedInView.hide(),d.userView.setLoggedOut();var c=document.referrer.indexOf("facebook.com")!=-1;!c&&a?d.introView.showAuthPrompt():c&&a?d.introView.showLargeAuthPrompt():d.introView.showAnonPrompt(),d.LoggedOutView.show(),g.applyStyles(b,{background:"white"})},getFacepile:function(){var a=g.newElement("iframe");return a.setAttribute("scrolling","no"),a.setAttribute("frameborder","0"),a.setAttribute("allowTransparency","true"),a.setAttribute("src","http://www.facebook.com/plugins/facepile.php?size=small&max_rows=1&app_id="+p.appId),a.setAttribute("width",p.appWidth-25),a.setAttribute("height","90"),g.applyStyles(a,{position:"relative",marginTop:"10px",marginLeft:"5px"}),a},onGotUserDetails:function(a){e=a,d.userView.removeUserInfo(),e&&(d.userView.addUserInfo(e),p.isActive?d.userView.setActivityOn():d.userView.setActivityOff())},getUserDetails:function(a){FB.api("/me/",function(b){a(b)})},logoutOfFacebook:function(){FB.logout(function(a){})},isActive:!0,isVisible:!0,toggleActivityOn:function(){p.isActive=!p.isActive,p.isActive?p.setActivityOn():p.setActivityOff(),p.setActivityStatus(p.isActive)},toggleActivityOff:function(){p.isActive=!p.isActive,p.isActive?p.setActivityOn():p.setActivityOff(),p.setActivityStatus(p.isActive)},setActivityOff:function(){d.tabbedView.hide(),d.userView.setActivityOff()},setActivityOn:function(){d.tabbedView.show(),d.userView.setActivityOn()},enabledKey:"mol-fb-app-on",enabled:!0,disableApp:function(){return p.enabled=!1,g.docCookies.setItem(p.enabledKey,"disabled"),p.setAppEnabledState(),!1},enableApp:function(){return p.enabled=!0,g.docCookies.setItem(p.enabledKey,"enabled"),p.setAppEnabledState(),!1},setAppEnabledState:function(){p.enabled?(g.showElement(b),p.isVisible=!0):(g.hideElement(b),p.isVisible=!1)},getEnabledState:function(){return p.enabled=g.docCookies.getItem(p.enabledKey)!=="disabled",p.enabled},getCurrentOpenGraphObjectID:function(){var a=document.getElementsByTagName("meta"),b,c=a.length;for(b=0;b<c;b++)if(a[b].getAttribute("property")==="og:url")return a[b].getAttribute("content");return undefined},unshareArticleWithID:function(a,b){FB.api(a,"delete",function(a){!a||a.error?b(!1):b(!0)})},getImagesForArticles:function(){},cookieKey:"mol-fb-app-share-on",setActivityStatus:function(a){p.isActive=a,g.docCookies.setItem(p.cookieKey,p.isActive?"on":"off")},getActivityStatus:function(){return g.docCookies.getItem(p.cookieKey)!=="off"},getPreviouslyReadArticles:function(){this.previouslyReadArticles=[],FB.api("/me/"+p.namespace+"."+p.actionName,{limit:10},function(a){var b,c,d,e=!1;d=a.data?a.data.length:0;for(b=0;b<d;b++)c=a.data[b],p.previouslyReadArticles.push(c),c&&c.data[p.itemType]&&c.data[p.itemType].url===p.getCurrentOpenGraphObjectID()&&(e=!0);setTimeout(function(){p.isActive&&p.isVisible&&(!p.previouslyReadArticles.length||!e)&&p.markArticleAsRead()},p.readWaitTime*1e3),p.populatePreviouslyReadArticles()})},populatePreviouslyReadArticles:function(){var a,b=this.previouslyReadArticles.length;for(a=0;a<b;a++)d.articlesList.addItem(this.previouslyReadArticles[a]);d.articlesList.finished()},markArticleAsRead:function(){var a=p.getCurrentOpenGraphObjectID();FB.api("/me/"+p.namespace+"."+p.actionName+"?"+p.itemType+"="+a,"post",function(a){!!a&&!a.error&&(d.tabbedView.flashTab(1),p.getPreviouslyReadArticles())})},injectStylesheet:function(a){var c=g.newElement("style"),d="#"+a,e=function(a){try{c.appendChild(document.createTextNode(d+" "+a))}catch(b){}};e("::-webkit-scrollbar { width: 8px; height: 8px; }"),e("::-webkit-scrollbar-track-piece { background-color: #eeecec; }"),e("::-webkit-scrollbar-thumb:vertical { background-color: #c1c1c1; }"),e("::-webkit-scrollbar-button:vertical:decrement { background: url("+p.images.SCROLL_THUMBS+") no-repeat; height: 11px; }"),e("::-webkit-scrollbar-button:vertical:increment { background: url("+p.images.SCROLL_THUMBS+") no-repeat 0 -6px; height: 11px; }"),e("::-webkit-scrollbar-button:end:decrement { display: none; }"),e("::-webkit-scrollbar-button:start:increment { display: none; }"),e("::-webkit-scrollbar-button:vertical:start:decrement { display: block; border-bottom: 5px solid white; }"),e("::-webkit-scrollbar-button:vertical:end:increment { display: block; border-top: 5px solid white; }"),b.appendChild(c)},onResizeWindow:function(a){var c;window.outerWidth<p.minWidthVisible?(g.hideElement(b),c="no"):p.isVisible?(g.showElement(b),c="yes"):c="off",p.visibleEventSent||(p.visibleEventSent=!0,_gaq.push(["_trackEvent","FacebookApp","Visibile",c])),p.mode==="fixed"&&p.handleScroll()},isScrolling:null,scrollInterval:null,scrollingEnded:function(){p.isScrolling=!1},windowWidth:function(){var a=0;return document.body&&document.body.offsetWidth&&(a=document.body.offsetWidth),document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(a=document.documentElement.offsetWidth),window.innerWidth&&window.innerHeight&&(a=window.innerWidth),a},handleScroll:function(a){window.pageYOffset+10>p.appTop?(p.mode="fixed",g.applyStyles(b,{position:"fixed",width:p.appWidth+"px",top:"10px",left:(p.windowWidth()-p.pageContainerWidth)/2-p.appWidth-18+"px"})):(p.mode="absolute",g.applyStyles(b,{position:"absolute",width:p.appWidth+"px",top:p.appTop+"px",left:"-"+(p.appWidth+10)+"px"}))},setYPosition:function(){var a;window.pageYOffset>p.initialYPosition+131?a=p.initialYPosition+(window.pageYOffset-(p.initialYPosition+131)):a=p.appTop,b.style.top=a+"px",p.scrollInterval=window.requestAnimationFrame(p.setYPosition)},initialYPosition:0,initialiseUI:function(a){p.pageContainerWidth=Ext.get("page-container").getWidth(),b=document.getElementById(a),g.hideElement(b);var e=document.getElementById("page-container");e&&(e.appendChild(b),p.initialYPosition=e.offsetTop),this.injectStylesheet(a),g.applyStyles(b,{position:"absolute",width:p.appWidth+"px",top:p.appTop+"px",left:"-"+(p.appWidth+10)+"px"});if(!window.onscroll)window.onscroll=p.handleScroll;else{var f=window.onscroll;window.onscroll=function(a){p.handleScroll(a),f(a)}}d.headerView=new h,b.appendChild(d.headerView.rootElement),c=g.newElement(),c.setAttribute("id",p.namespace+"_app_main"),window.addEventListener?window.addEventListener("resize",p.onResizeWindow,!1):window.attachEvent?window.attachEvent("onresize",p.onResizeWindow):window.onresize=p.onResizeWindow,b.appendChild(c),g.hideElement(b),d.LoggedInView=new o,d.LoggedInView.rootElement.setAttribute("id",p.namespace+"_view_container_logged_in"),d.LoggedOutView=new o,d.LoggedOutView.rootElement.setAttribute("id",p.namespace+"_view_container_logged_out"),d.LoadingView=new o,d.LoadingView.rootElement.setAttribute("id",p.namespace+"_view_container_loading"),d.LoggedInView.hide(),d.LoggedOutView.hide(),g.applyStyles(d.LoadingView.rootElement,{height:"60px"}),g.applyStyles(d.LoggedOutView.rootElement,{padding:"10px",width:p.appWidth-20+"px",backgroundImage:"url("+p.images.LOGGED_OUT_BOTTOM_GRADIENT+")"}),c.appendChild(d.LoadingView.rootElement),c.appendChild(d.LoggedInView.rootElement),c.appendChild(d.LoggedOutView.rootElement),d.introView=new l,d.tabbedView=new n,d.userView=new j,d.activityPlugin=new i,d.articlesList=new m,d.LoggedOutView.addChild(d.introView),p.tabOrder==0?(d.tabbedView.addTab(p.copy.FRIENDS_ACTIVITY,d.activityPlugin),d.tabbedView.addTab(p.copy.YOUR_ACTIVITY
,d.articlesList.rootElement)):(d.tabbedView.addTab(p.copy.YOUR_ACTIVITY,d.articlesList.rootElement),d.tabbedView.addTab(p.copy.FRIENDS_ACTIVITY,d.activityPlugin)),d.articlesList.onRemove=this.unshareArticleWithID,d.LoggedInView.addChild(d.userView),d.LoggedInView.addChild(d.tabbedView),p.showLogoutLink&&(d.logoutButton=new k,d.logoutButton.onLogout=this.logoutOfFacebook,d.LoggedInView.addChild(d.logoutButton)),p.isActive=p.getActivityStatus();var q=p.getEnabledState(),r=!1;if(q&&window.fbApiInit){var s=function(a){p.onResizeWindow(),p.fbStatus=a,a=="connected"?(p.userIsLoggedIn(),_gaq.push(["_trackEvent","FacebookApp","UserStatus","Connected"])):a=="not_authorized"?r||(r=!0,p.userIsLoggedInButNotAuthorized(),_gaq.push(["_trackEvent","FacebookApp","UserStatus","NotConnected"])):(p.userIsNotLoggedIn(),_gaq.push(["_trackEvent","FacebookApp","UserStatus","NotLoggedIn"]),p.showWhenLoggedOut?(g.showElement(b),p.isVisible=!0):(g.hideElement(b),p.isVisible=!1))};FB.Event.subscribe("auth.statusChange",function(a){p.checkLoginStatus(s)}),p.checkLoginStatus(s)}var t=g.newElement("a");t.setAttribute("href",p.infoUrl),t.setAttribute("target","_blank"),t.setAttribute("title",p.copy.INFO_TOOLTIP),g.setText(t,p.copy.INFO_LINK),g.applyStyles(t,{textIndent:"25px",overflow:"hidden",position:"absolute",bottom:"8px",left:"10px",display:"block",height:"17px"}),c.appendChild(t)},ieSupport:function(){var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");while(c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0]);return b>4?b:a}(),setConfig:function(a){if(a)for(var b in a)p[b]=a[b]},initialise:function(){p.setConfig(window.MolFacebookAppConfig),(!p.ieSupport||p.ieSupport&&p.ieSupport>=8)&&p.initialiseUI(p.elementId)}},p}();(function(a){function e(){window.fbApiInit=!0,MolFacebookApp.initialise()}function f(){if(window.FB&&window.FB._apiKey)return e();c+=d,c<b&&setTimeout(f,d)}var b=1e4,c=0,d=250;f()})(document);